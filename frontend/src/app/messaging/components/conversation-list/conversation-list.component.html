<div class="conversations-container">
  <div *ngFor="let conv of conversations"
       class="conversation-card"
       [class.unread]="conv.unreadCount > 0"
       (click)="openConversation(conv._id)"> <!-- Cambiado a conv._id -->

    <div class="user-avatar">
      <img [src]="conv.participants[0].startsWith('doc')
           ? 'assets/doctor-icon.png'
           : 'assets/patient-icon.png'"
           [alt]="conv.participants[0].startsWith('doc') ? 'Doctor' : 'Paciente'">
    </div>

    <div class="conversation-info">
      <h3>{{ getParticipantName(conv.participants[0]) }}</h3>
      <p class="last-message">{{ conv.lastMessage.content }}</p>
    </div>

    <div class="conversation-meta">
      <span class="timestamp">{{ conv.lastMessage.timestamp | date:'shortTime' }}</span>
      <span *ngIf="conv.unreadCount > 0" class="unread-badge">
        {{ conv.unreadCount }}
      </span>
    </div>
  </div>
</div>
